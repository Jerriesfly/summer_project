# PJ说明文档

钟尹骏 19302010025

### 项目完成情况

基础部分全部完成，Bonus部分完成“项目说明文档”、“验证码”、“详情页评论”和“云部署”

#### 概述

创建EncodingFilter对request进行编码，避免中文乱码

对涉及用户操作的行为均先行判断登录状态，删除图片等敏感操作额外判断图片上传者是否与当前登录用户相同

#### 首页

轮播图使用bootstrap自带的轮播图实现

“最热门”使用count(favorID) as numFavored .....  Order by numFavored desc实现

“最新”使用order by dateTime desc实现

#### 注册&登陆

在session中随机生成四位验证码，并创建图像绘制类生成验证码图片，登录/注册时进行匹配

表单提交后由servlet处理，若不通过则返回之前的页面，利用{requestscope.userName}等在页面输出之前输入的内容以及错误提示

注册时为密码输入框绑定onkeyup事件，根据其中内容改变class名实现提醒效果

#### 详情页面

热度由收藏数量定义

未登录时显示为“请登录”，同时不显示评论框

为显示评论内容建立了一张表用于存放用户名、图片名、评论内容和评论时间

#### 搜索

与首页获取图片使用了相同的sql语句

页面获取对应的imageid数组，分为多个table显示对应的图片，使用display:none实现分液效果

#### 上传界面

下拉栏联动使用外部js文件，避免查询数据库获取对应城市

#### 好友列表

提供查看好友列表、同意好友申请、添加好友和设置收藏显示状态的功能

在好友列表下点击view favorite跳转至“我的收藏”界面，增加好友id的参数来显示对应收藏，在显示前判断是否为好友、好友收藏是否公开

添加好友判断用户是否存在、是否为自己、是否已是好友